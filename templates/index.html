<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>중세국어 번역기</title>

    <!-- Pretendard 폰트 -->
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css"
    />

    <!-- Flask static 폴더의 CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>

  <body>
    <div class="container">
      <header class="header">
        <img
          src="{{ url_for('static', filename='Ai-king.jpeg') }}"
          alt="Ai-king"
          class="Ai-king"
        />
        <h1>중세국어 번역기</h1>
        <p>세종대왕과 함께하는 옛 한글 번역 여행</p>
      </header>

      <div class="translator-box">
        <label>중세국어</label>
        <textarea
          id="inputText"
          placeholder="번역할 중세국어 문장을 입력하세요..."
        ></textarea>

        <label>현대국어</label>
        <textarea
          id="outputText"
          placeholder="AI가 번역한 결과가 여기에 표시됩니다."
          readonly
        ></textarea>

        <div class="button-group">
          <button onclick="translateText()">번역하기</button>
          <button onclick="copyText()">복사</button>
        </div>
      </div>

      <p class="ai-sejong">AI 세종</p>
    </div>

    <script>
      // 번역하기 버튼 클릭 시 Flask 서버 API 호출
      async function translateText() {
        const input = document.getElementById("inputText").value;
        const output = document.getElementById("outputText");

        if (!input) {
          output.value = "번역할 내용을 입력하세요.";
          return;
        }

        try {
          const res = await fetch("/translate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text: input }),
          });

          const data = await res.json();
          output.value = data.result || "번역 실패";
        } catch (err) {
          console.error(err);
          output.value = "번역 중 오류 발생";
        }
      }

      // 복사 버튼
      function copyText() {
        const output = document.getElementById("outputText");
        output.select();
        document.execCommand("copy");
        alert("복사되었습니다!");
      }
    </script>
  </body>
</html>
